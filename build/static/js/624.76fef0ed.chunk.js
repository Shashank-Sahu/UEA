"use strict";(self.webpackChunkmodernize=self.webpackChunkmodernize||[]).push([[624],{4085:function(e,t,o){o(7313);var n=o(182),r=o(6417);t.Z=function(e){var t=e.title,o=e.description,i=e.children;return(0,r.jsxs)("div",{children:[(0,r.jsxs)(n.q,{children:[(0,r.jsx)("title",{children:t}),(0,r.jsx)("meta",{name:"description",content:o})]}),i]})}},5998:function(e,t,o){o(7313);var n=o(3428),r=o(3405),i=o(1113),a=o(5898),s=o(7829),l=o(6417);t.Z=function(e){var t=e.title,o=e.subtitle,c=e.children,u=e.action,d=e.footer,p=e.cardheading,f=e.headtitle,h=e.headsubtitle,v=e.middlecontent;return(0,l.jsxs)(n.Z,{sx:{padding:0},elevation:9,variant:void 0,children:[p?(0,l.jsxs)(r.Z,{children:[(0,l.jsx)(i.Z,{variant:"h5",children:f}),(0,l.jsx)(i.Z,{variant:"subtitle2",color:"textSecondary",children:h})]}):(0,l.jsxs)(r.Z,{sx:{p:"30px"},children:[t?(0,l.jsxs)(a.Z,{direction:"row",spacing:2,justifyContent:"space-between",alignItems:"center",mb:3,children:[(0,l.jsxs)(s.Z,{children:[t?(0,l.jsx)(i.Z,{variant:"h5",children:t}):"",o?(0,l.jsx)(i.Z,{variant:"subtitle2",color:"textSecondary",children:o}):""]}),u]}):null,c]}),v,d]})}},3311:function(e,t,o){o.d(t,{A:function(){return i}});var n=o(4165),r=o(5861),i=function(){var e=(0,r.Z)((0,n.Z)().mark((function e(){var t,o,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user/verify",{credentials:"include"});case 2:return t=e.sent,e.next=5,t.json();case 5:return o=e.sent,r=o.user,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},4624:function(e,t,o){o.r(t),o.d(t,{default:function(){return ue}});var n=o(7313),r=o(7829),i=o(9019),a=o(4085),s=o(3433),l=o(9439),c=o(2492),u=o(3319),d=o(9860),p=o(5998),f=o(8446),h=o(6417),v=function(){var e=n.useState(1),t=(0,l.Z)(e,2),o=t[0],r=t[1],i=n.useState(new Date),a=(0,l.Z)(i,1)[0],v=n.useState([]),Z=(0,l.Z)(v,2),m=Z[0],x=Z[1],g=n.useState({}),b=(0,l.Z)(g,2),j=b[0],y=b[1],w=n.useState({}),S=(0,l.Z)(w,2),C=S[0],D=S[1],O=n.useState([]),T=(0,l.Z)(O,2),R=T[0],M=T[1],k=n.useState(0),N=(0,l.Z)(k,2),A=N[0],P=N[1];(0,n.useEffect)((function(){!function(){var e=new Date;e.setDate(a.getDate()-7),fetch("/api/survey/poll-results",{method:"POST",credentials:"include",headers:{"content-type":"application/json"},body:JSON.stringify({fromDate:e.toLocaleDateString(),toDate:a.toLocaleDateString()})}).then((function(e){return e.json()})).then((function(e){var t;console.log(e),m=[],j={},C={};for(var n=0;n<e.length;n++){t=new Date(e[n].createdOn),m.push(t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear()),A+=e[n].userCount;for(var r=0,i=Object.entries(e[n].indoorData);r<i.length;r++){var a=(0,l.Z)(i[r],2),c=a[0],u=a[1];j[c]?j[c].push(u):j[c]=[u]}for(var d=0,p=Object.entries(e[n].outdoorData);d<p.length;d++){var f=(0,l.Z)(p[d],2),h=f[0],v=f[1];C[h]?C[h].push(v):C[h]=[v]}}P(A),y(j),D(C),x((0,s.Z)(m)),R=[];for(var Z=1===o?j:C,g=0,b=Object.entries(Z);g<b.length;g++){var w=(0,l.Z)(b[g],2),S=w[0],O=w[1];R.push({name:S,data:O})}M((0,s.Z)(R))}))}()}),[]);var I=(0,d.Z)(),L={chart:{type:"bar",fontFamily:"'Plus Jakarta Sans', sans-serif;",foreColor:"#adb0bb",toolbar:{show:!0},height:370},colors:[I.palette.primary.main,I.palette.secondary.main],plotOptions:{bar:{horizontal:!1,barHeight:"60%",columnWidth:"42%",borderRadius:[6],borderRadiusApplication:"end",borderRadiusWhenStacked:"all"}},stroke:{show:!0,width:5,lineCap:"butt",colors:["transparent"]},dataLabels:{enabled:!1},legend:{show:!1},grid:{borderColor:"rgba(0,0,0,0.1)",strokeDashArray:3,xaxis:{lines:{show:!1}}},yaxis:{tickAmount:4},xaxis:{categories:m,axisBorder:{show:!0}},tooltip:{theme:"dark"===I.palette.mode?"dark":"light",fillSeriesColor:!1}};return(0,h.jsx)(p.Z,{title:"Activity Overview | Total User Surveys this week: ".concat(A),action:(0,h.jsxs)(c.Z,{labelId:"activity",id:"activity",value:o,size:"small",onChange:function(e){r(e.target.value),R=[];for(var t=1===e.target.value?j:C,o=0,n=Object.entries(t);o<n.length;o++){var i=(0,l.Z)(n[o],2),a=i[0],c=i[1];R.push({name:a,data:c})}M((0,s.Z)(R))},children:[(0,h.jsx)(u.Z,{value:1,children:"Indoor"}),(0,h.jsx)(u.Z,{value:2,children:"Outdoor"})]}),children:(0,h.jsx)(f.Z,{options:L,series:R,type:"bar",height:"370px"})})},Z=o(4942),m=o(7462),x=o(3366),g=o(3061),b=o(1615),j=o(1921),y=o(7592),w=o(7342);var S=n.createContext({}),C=o(2298),D=o(7430);function O(e){return(0,C.Z)("MuiTimeline",e)}(0,D.Z)("MuiTimeline",["root","positionLeft","positionRight","positionAlternate"]);var T=["position","className"],R=(0,y.ZP)("ul",{name:"MuiTimeline",slot:"Root",overridesResolver:function(e,t){var o=e.ownerState;return[t.root,o.position&&t["position".concat((0,b.Z)(o.position))]]}})({display:"flex",flexDirection:"column",padding:"6px 16px",flexGrow:1}),M=n.forwardRef((function(e,t){var o=(0,w.Z)({props:e,name:"MuiTimeline"}),r=o.position,i=void 0===r?"right":r,a=o.className,s=(0,x.Z)(o,T),l=(0,m.Z)({},o,{position:i}),c=function(e){var t=e.position,o=e.classes,n={root:["root",t&&"position".concat((0,b.Z)(t))]};return(0,j.Z)(n,O,o)}(l),u=n.useMemo((function(){return{position:i}}),[i]);return(0,h.jsx)(S.Provider,{value:u,children:(0,h.jsx)(R,(0,m.Z)({className:(0,g.Z)(c.root,a),ownerState:l,ref:t},s))})}));function k(e){return(0,C.Z)("MuiTimelineOppositeContent",e)}var N=(0,D.Z)("MuiTimelineOppositeContent",["root","positionLeft","positionRight","positionAlternate"]),A=o(7816);function P(e){return(0,C.Z)("MuiTimelineContent",e)}var I=(0,D.Z)("MuiTimelineContent",["root","positionLeft","positionRight","positionAlternate"]);function L(e){return(0,C.Z)("MuiTimelineItem",e)}(0,D.Z)("MuiTimelineItem",["root","positionLeft","positionRight","positionAlternate","missingOppositeContent"]);var z=["position","className"],W=(0,y.ZP)("li",{name:"MuiTimelineItem",slot:"Root",overridesResolver:function(e,t){var o=e.ownerState;return[t.root,t["position".concat((0,b.Z)(o.position))]]}})((function(e){var t,o=e.ownerState;return(0,m.Z)({listStyle:"none",display:"flex",position:"relative",minHeight:70},"left"===o.position&&{flexDirection:"row-reverse"},"alternate"===o.position&&{"&:nth-of-type(even)":(t={flexDirection:"row-reverse"},(0,Z.Z)(t,"& .".concat(I.root),{textAlign:"right"}),(0,Z.Z)(t,"& .".concat(N.root),{textAlign:"left"}),t)},!o.hasOppositeContent&&{"&:before":{content:'""',flex:1,padding:"6px 16px"}})})),F=n.forwardRef((function(e,t){var o=(0,w.Z)({props:e,name:"MuiTimelineItem"}),r=o.position,i=o.className,a=(0,x.Z)(o,z),s=n.useContext(S).position,l=!1;n.Children.forEach(o.children,(function(e){(0,A.Z)(e,["TimelineOppositeContent"])&&(l=!0)}));var c=(0,m.Z)({},o,{position:r||s||"right",hasOppositeContent:l}),u=function(e){var t=e.position,o=e.classes,n=e.hasOppositeContent,r={root:["root","position".concat((0,b.Z)(t)),!n&&"missingOppositeContent"]};return(0,j.Z)(r,L,o)}(c),d=n.useMemo((function(){return{position:c.position}}),[c.position]);return(0,h.jsx)(S.Provider,{value:d,children:(0,h.jsx)(W,(0,m.Z)({className:(0,g.Z)(u.root,i),ownerState:c,ref:t},a))})})),J=o(1113),E=["className"],G=(0,y.ZP)(J.Z,{name:"MuiTimelineOppositeContent",slot:"Root",overridesResolver:function(e,t){var o=e.ownerState;return[t.root,t["position".concat((0,b.Z)(o.position))]]}})((function(e){var t=e.ownerState;return(0,m.Z)({padding:"6px 16px",marginRight:"auto",textAlign:"right",flex:1},"left"===t.position&&{textAlign:"left"})})),H=n.forwardRef((function(e,t){var o=(0,w.Z)({props:e,name:"MuiTimelineOppositeContent"}),r=o.className,i=(0,x.Z)(o,E),a=n.useContext(S).position,s=(0,m.Z)({},o,{position:a||"left"}),l=function(e){var t=e.position,o=e.classes,n={root:["root","position".concat((0,b.Z)(t))]};return(0,j.Z)(n,k,o)}(s);return(0,h.jsx)(G,(0,m.Z)({component:"div",className:(0,g.Z)(l.root,r),ownerState:s,ref:t},i))}));H.muiName="TimelineOppositeContent";var Y=H;function B(e){return(0,C.Z)("MuiTimelineSeparator",e)}(0,D.Z)("MuiTimelineSeparator",["root"]);var q=["className"],U=(0,y.ZP)("div",{name:"MuiTimelineSeparator",slot:"Root",overridesResolver:function(e,t){return t.root}})({display:"flex",flexDirection:"column",flex:0,alignItems:"center"}),_=n.forwardRef((function(e,t){var o=(0,w.Z)({props:e,name:"MuiTimelineSeparator"}),n=o.className,r=(0,x.Z)(o,q),i=o,a=function(e){var t=e.classes;return(0,j.Z)({root:["root"]},B,t)}(i);return(0,h.jsx)(U,(0,m.Z)({className:(0,g.Z)(a.root,n),ownerState:i,ref:t},r))}));function K(e){return(0,C.Z)("MuiTimelineDot",e)}(0,D.Z)("MuiTimelineDot",["root","filled","outlined","filledGrey","outlinedGrey","filledPrimary","outlinedPrimary","filledSecondary","outlinedSecondary"]);var Q=["className","color","variant"],V=(0,y.ZP)("span",{name:"MuiTimelineDot",slot:"Root",overridesResolver:function(e,t){var o=e.ownerState;return[t.root,t["inherit"!==o.color&&"".concat(o.variant).concat((0,b.Z)(o.color))],t[o.variant]]}})((function(e){var t=e.ownerState,o=e.theme;return(0,m.Z)({display:"flex",alignSelf:"baseline",borderStyle:"solid",borderWidth:2,padding:4,borderRadius:"50%",boxShadow:(o.vars||o).shadows[1],margin:"11.5px 0"},"filled"===t.variant&&(0,m.Z)({borderColor:"transparent"},"inherit"!==t.color&&(0,m.Z)({},"grey"===t.color?{color:(o.vars||o).palette.grey[50],backgroundColor:(o.vars||o).palette.grey[400]}:{color:(o.vars||o).palette[t.color].contrastText,backgroundColor:(o.vars||o).palette[t.color].main})),"outlined"===t.variant&&(0,m.Z)({boxShadow:"none",backgroundColor:"transparent"},"inherit"!==t.color&&(0,m.Z)({},"grey"===t.color?{borderColor:(o.vars||o).palette.grey[400]}:{borderColor:(o.vars||o).palette[t.color].main})))})),X=n.forwardRef((function(e,t){var o=(0,w.Z)({props:e,name:"MuiTimelineDot"}),n=o.className,r=o.color,i=void 0===r?"grey":r,a=o.variant,s=void 0===a?"filled":a,l=(0,x.Z)(o,Q),c=(0,m.Z)({},o,{color:i,variant:s}),u=function(e){var t=e.color,o=e.variant,n=e.classes,r={root:["root",o,"inherit"!==t&&"".concat(o).concat((0,b.Z)(t))]};return(0,j.Z)(r,K,n)}(c);return(0,h.jsx)(V,(0,m.Z)({className:(0,g.Z)(u.root,n),ownerState:c,ref:t},l))}));function $(e){return(0,C.Z)("MuiTimelineConnector",e)}(0,D.Z)("MuiTimelineConnector",["root"]);var ee=["className"],te=(0,y.ZP)("span",{name:"MuiTimelineConnector",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(e){var t=e.theme;return{width:2,backgroundColor:(t.vars||t).palette.grey[400],flexGrow:1}})),oe=n.forwardRef((function(e,t){var o=(0,w.Z)({props:e,name:"MuiTimelineConnector"}),n=o.className,r=(0,x.Z)(o,ee),i=o,a=function(e){var t=e.classes;return(0,j.Z)({root:["root"]},$,t)}(i);return(0,h.jsx)(te,(0,m.Z)({className:(0,g.Z)(a.root,n),ownerState:i,ref:t},r))})),ne=["className"],re=(0,y.ZP)(J.Z,{name:"MuiTimelineContent",slot:"Root",overridesResolver:function(e,t){var o=e.ownerState;return[t.root,t["position".concat((0,b.Z)(o.position))]]}})((function(e){var t=e.ownerState;return(0,m.Z)({flex:1,padding:"6px 16px",textAlign:"left"},"left"===t.position&&{textAlign:"right"})})),ie=n.forwardRef((function(e,t){var o=(0,w.Z)({props:e,name:"MuiTimelineContent"}),r=o.className,i=(0,x.Z)(o,ne),a=n.useContext(S).position,s=(0,m.Z)({},o,{position:a||"right"}),l=function(e){var t=e.position,o=e.classes,n={root:["root","position".concat((0,b.Z)(t))]};return(0,j.Z)(n,P,o)}(s);return(0,h.jsx)(re,(0,m.Z)({component:"div",className:(0,g.Z)(l.root,r),ownerState:s,ref:t},i))})),ae=o(3311),se=o(8467),le=function(){var e=(0,se.s0)(),t=(0,n.useState)(),o=(0,l.Z)(t,2),r=o[0],i=o[1],a=function(e){for(var t=0,o=0,n=Object.entries(e);o<n.length;o++){var r=(0,l.Z)(n[o],2),i=(r[0],r[1]);t+=Number(i)}return t};return(0,n.useEffect)((function(){(0,ae.A)().then((function(t){t?function(e){fetch("/api/survey/user-survey-results",{method:"POST",credentials:"include",headers:{"content-type":"application/json"},body:JSON.stringify({email:e.email})}).then((function(e){return e.json()})).then((function(e){console.log(e),i((0,s.Z)(e))}))}(t):e("/auth/login")}))}),[]),(0,h.jsx)(p.Z,{title:"Last Week Activity",children:(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(M,{className:"theme-timeline",nonce:void 0,onResize:void 0,onResizeCapture:void 0,sx:(0,Z.Z)({p:0,mb:"-40px","& .MuiTimelineConnector-root":{width:"1px",backgroundColor:"#efefef"}},"& .".concat(N.root),{flex:.5,paddingLeft:0}),children:r&&r.map((function(e){return(0,h.jsxs)(F,{children:[(0,h.jsx)(Y,{children:(t=new Date(e.createdOn),t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear())}),(0,h.jsxs)(_,{children:[(0,h.jsx)(X,{color:"primary",variant:"outlined"}),(0,h.jsx)(oe,{})]}),(0,h.jsxs)(ie,{children:["Indoor :",(0,h.jsx)("br",{})," ",a(e.indoorData)," hrs"]}),(0,h.jsxs)(ie,{children:["Outdoor :",(0,h.jsx)("br",{})," ",a(e.outdoorData)," hrs"]})]},e._id);var t}))})})})},ce=function(){var e=(0,se.s0)(),t=n.useState(1),o=(0,l.Z)(t,2),r=o[0],i=o[1],a=n.useState(new Date),v=(0,l.Z)(a,1)[0],Z=n.useState([]),m=(0,l.Z)(Z,2),x=m[0],g=m[1],b=n.useState({}),j=(0,l.Z)(b,2),y=j[0],w=j[1],S=n.useState({}),C=(0,l.Z)(S,2),D=C[0],O=C[1],T=n.useState([]),R=(0,l.Z)(T,2),M=R[0],k=R[1];(0,n.useEffect)((function(){(0,ae.A)().then((function(t){t?function(e){(new Date).setDate(v.getDate()-7),fetch("/api/survey/user-survey-results",{method:"POST",credentials:"include",headers:{"content-type":"application/json"},body:JSON.stringify({email:e.email})}).then((function(e){return e.json()})).then((function(e){var t;console.log(e),x=[],y={},D={};for(var o=0;o<e.length;o++){t=new Date(e[o].createdOn),x.push(t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear());for(var n=0,i=Object.entries(e[o].indoorData);n<i.length;n++){var a=(0,l.Z)(i[n],2),c=a[0],u=a[1];y[c]?y[c].push(u):y[c]=[u]}for(var d=0,p=Object.entries(e[o].outdoorData);d<p.length;d++){var f=(0,l.Z)(p[d],2),h=f[0],v=f[1];D[h]?D[h].push(v):D[h]=[v]}}w(y),O(D),g((0,s.Z)(x)),M=[];for(var Z=1===r?y:D,m=0,b=Object.entries(Z);m<b.length;m++){var j=(0,l.Z)(b[m],2),S=j[0],C=j[1];M.push({name:S,data:C})}k((0,s.Z)(M))}))}(t):e("/auth/login")}))}),[]);var N=(0,d.Z)(),A={chart:{type:"bar",fontFamily:"'Plus Jakarta Sans', sans-serif;",foreColor:"#adb0bb",toolbar:{show:!0},height:370},colors:[N.palette.primary.main,N.palette.secondary.main],plotOptions:{bar:{horizontal:!1,barHeight:"60%",columnWidth:"42%",borderRadius:[6],borderRadiusApplication:"end",borderRadiusWhenStacked:"all"}},stroke:{show:!0,width:5,lineCap:"butt",colors:["transparent"]},dataLabels:{enabled:!1},legend:{show:!1},grid:{borderColor:"rgba(0,0,0,0.1)",strokeDashArray:3,xaxis:{lines:{show:!1}}},yaxis:{tickAmount:4},xaxis:{categories:x,axisBorder:{show:!0}},tooltip:{theme:"dark"===N.palette.mode?"dark":"light",fillSeriesColor:!1}};return(0,h.jsx)(p.Z,{title:"Last Week Overview",action:(0,h.jsxs)(c.Z,{labelId:"activity",id:"activity",value:r,size:"small",onChange:function(e){i(e.target.value),M=[];for(var t=1===e.target.value?y:D,o=0,n=Object.entries(t);o<n.length;o++){var r=(0,l.Z)(n[o],2),a=r[0],c=r[1];M.push({name:a,data:c})}k((0,s.Z)(M))},children:[(0,h.jsx)(u.Z,{value:1,children:"Indoor"}),(0,h.jsx)(u.Z,{value:2,children:"Outdoor"})]}),children:(0,h.jsx)(f.Z,{options:A,series:M,type:"bar",height:"370px"})})},ue=function(){return(0,h.jsx)(a.Z,{title:"Dashboard",description:"this is Dashboard",children:(0,h.jsx)(r.Z,{children:(0,h.jsxs)(i.ZP,{container:!0,spacing:3,children:[(0,h.jsx)(i.ZP,{item:!0,xs:12,lg:12,children:(0,h.jsx)(v,{})}),(0,h.jsx)(i.ZP,{item:!0,xs:12,lg:4,children:(0,h.jsx)(le,{})}),(0,h.jsx)(i.ZP,{item:!0,xs:12,lg:8,children:(0,h.jsx)(ce,{})})]})})})}}}]);