"use strict";(self.webpackChunkmodernize=self.webpackChunkmodernize||[]).push([[197],{4085:function(e,t,n){n(7313);var r=n(182),i=n(6417);t.Z=function(e){var t=e.title,n=e.description,s=e.children;return(0,i.jsxs)("div",{children:[(0,i.jsxs)(r.q,{children:[(0,i.jsx)("title",{children:t}),(0,i.jsx)("meta",{name:"description",content:n})]}),s]})}},5998:function(e,t,n){n(7313);var r=n(3428),i=n(3405),s=n(1113),a=n(5898),l=n(7829),o=n(6417);t.Z=function(e){var t=e.title,n=e.subtitle,u=e.children,c=e.action,d=e.footer,h=e.cardheading,x=e.headtitle,f=e.headsubtitle,Z=e.middlecontent;return(0,o.jsxs)(r.Z,{sx:{padding:0},elevation:9,variant:void 0,children:[h?(0,o.jsxs)(i.Z,{children:[(0,o.jsx)(s.Z,{variant:"h5",children:x}),(0,o.jsx)(s.Z,{variant:"subtitle2",color:"textSecondary",children:f})]}):(0,o.jsxs)(i.Z,{sx:{p:"30px"},children:[t?(0,o.jsxs)(a.Z,{direction:"row",spacing:2,justifyContent:"space-between",alignItems:"center",mb:3,children:[(0,o.jsxs)(l.Z,{children:[t?(0,o.jsx)(s.Z,{variant:"h5",children:t}):"",n?(0,o.jsx)(s.Z,{variant:"subtitle2",color:"textSecondary",children:n}):""]}),c]}):null,u]}),Z,d]})}},3311:function(e,t,n){n.d(t,{A:function(){return s}});var r=n(4165),i=n(5861),s=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t,n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/user/verify",{credentials:"include"});case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,i=n.user,e.abrupt("return",i);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},2197:function(e,t,n){n.r(t),n.d(t,{default:function(){return C}});var r=n(3433),i=n(9439),s=n(7313),a=n(7829),l=n(9019),o=n(501),u=n(1113),c=n(3306),d=n(1039),h=n(9099),x=n(4085),f=n(2492),Z=n(3319),m=n(9860),j=n(5998),v=n(8446),p=n(3311),g=n(8467),y=n(6417),b=function(e){var t=e.chart,n=(0,g.s0)(),a=s.useState(1),l=(0,i.Z)(a,2),o=l[0],u=l[1],c=s.useState([]),d=(0,i.Z)(c,2),h=d[0],x=d[1],b=s.useState({}),C=(0,i.Z)(b,2),S=C[0],P=C[1],k=s.useState({}),w=(0,i.Z)(k,2),A=w[0],W=w[1],O=s.useState([]),z=(0,i.Z)(O,2),D=z[0],I=z[1],q=s.useState(0),B=(0,i.Z)(q,2),F=B[0],R=B[1];(0,s.useEffect)((function(){(0,p.A)().then((function(e){e?(console.log(t),function(e){var t;h=[],S={},A={};for(var n=0;n<e.length;n++){t=new Date(e[n].createdOn),F+=e[n].userCount,h.push(t.getDate()+"/"+(t.getMonth()+1)+"/"+t.getFullYear());for(var s=0,a=Object.entries(e[n].indoorData);s<a.length;s++){var l=(0,i.Z)(a[s],2),u=l[0],c=l[1];S[u]?S[u].push(c):S[u]=[c]}for(var d=0,f=Object.entries(e[n].outdoorData);d<f.length;d++){var Z=(0,i.Z)(f[d],2),m=Z[0],j=Z[1];A[m]?A[m].push(j):A[m]=[j]}}P(S),W(A),x((0,r.Z)(h)),R(F),D=[];for(var v=1===o?S:A,p=0,g=Object.entries(v);p<g.length;p++){var y=(0,i.Z)(g[p],2),b=y[0],C=y[1];D.push({name:b,data:C})}I((0,r.Z)(D))}(t)):n("/auth/login")}))}),[t]);var M=(0,m.Z)(),T={chart:{type:"bar",fontFamily:"'Plus Jakarta Sans', sans-serif;",foreColor:"#adb0bb",toolbar:{show:!0},height:370},colors:[M.palette.primary.main,M.palette.secondary.main],plotOptions:{bar:{horizontal:!1,barHeight:"60%",columnWidth:"42%",borderRadius:[6],borderRadiusApplication:"end",borderRadiusWhenStacked:"all"}},stroke:{show:!0,width:5,lineCap:"butt",colors:["transparent"]},dataLabels:{enabled:!1},legend:{show:!1},grid:{borderColor:"rgba(0,0,0,0.1)",strokeDashArray:3,xaxis:{lines:{show:!1}}},yaxis:{tickAmount:4},xaxis:{categories:h,axisBorder:{show:!0}},tooltip:{theme:"dark"===M.palette.mode?"dark":"light",fillSeriesColor:!1}};return(0,y.jsx)(j.Z,{title:"Survey Results | Total User Count: ".concat(F),action:(0,y.jsxs)(f.Z,{labelId:"activity",id:"activity",value:o,size:"small",onChange:function(e){u(e.target.value),D=[];for(var t=1===e.target.value?S:A,n=0,s=Object.entries(t);n<s.length;n++){var a=(0,i.Z)(s[n],2),l=a[0],o=a[1];D.push({name:l,data:o})}I((0,r.Z)(D))},children:[(0,y.jsx)(Z.Z,{value:1,children:"Indoor"}),(0,y.jsx)(Z.Z,{value:2,children:"Outdoor"})]}),children:(0,y.jsx)(v.Z,{options:T,series:D,type:"bar",height:"370px"})})},C=function(){var e=(0,s.useState)(""),t=(0,i.Z)(e,2),n=t[0],f=t[1],Z=(0,s.useState)(""),m=(0,i.Z)(Z,2),j=m[0],v=m[1],p=(0,s.useState)(13),g=(0,i.Z)(p,2),C=g[0],S=g[1],P=(0,s.useState)(130),k=(0,i.Z)(P,2),w=k[0],A=k[1],W=(0,s.useState)(""),O=(0,i.Z)(W,2),z=O[0],D=O[1],I=(0,s.useState)(!1),q=(0,i.Z)(I,2),B=q[0],F=q[1],R=(0,s.useState)([]),M=(0,i.Z)(R,2),T=M[0],J=M[1],E=function(e,t){console.log(e),t(e)};return(0,y.jsx)(x.Z,{title:"SurveyBoard",description:"this is SurveyBoard",children:(0,y.jsx)(a.Z,{children:(0,y.jsxs)(l.ZP,{container:!0,spacing:3,children:[(0,y.jsx)(l.ZP,{item:!0,xs:12,lg:12,children:(0,y.jsx)(b,{chart:T})}),(0,y.jsx)(l.ZP,{item:!0,xs:12,children:(0,y.jsx)(o.Z,{elevation:3,children:(0,y.jsxs)(a.Z,{sx:{padding:5},children:[(0,y.jsx)(u.Z,{variant:"h6",gutterBottom:!0,sx:{paddingBottom:5},children:"Filter Survey"}),(0,y.jsxs)(l.ZP,{container:!0,spacing:3,children:[(0,y.jsx)(l.ZP,{item:!0,xs:12,sm:2,children:(0,y.jsx)(c.Z,{sx:{display:"flex",justifyContent:"center",fontWeight:700},children:"Country"})}),(0,y.jsx)(l.ZP,{item:!0,xs:12,sm:10,children:(0,y.jsx)(d.Z,{required:!0,id:"country",name:"country",label:"Country",fullWidth:!0,size:"small",autoComplete:"off",variant:"outlined",value:n,onChange:function(e){return E(e.target.value,f)}})}),(0,y.jsx)(l.ZP,{item:!0,xs:12,sm:2,children:(0,y.jsx)(c.Z,{sx:{display:"flex",justifyContent:"center",fontWeight:700},children:"State"})}),(0,y.jsx)(l.ZP,{item:!0,xs:12,sm:10,children:(0,y.jsx)(d.Z,{required:!0,id:"state",name:"state",label:"State",fullWidth:!0,size:"small",autoComplete:"off",variant:"outlined",value:j,onChange:function(e){return E(e.target.value,v)}})}),(0,y.jsx)(l.ZP,{item:!0,xs:12,sm:2,children:(0,y.jsx)(c.Z,{sx:{display:"flex",justifyContent:"center",fontWeight:700},children:"Min. Age"})}),(0,y.jsx)(l.ZP,{item:!0,xs:12,sm:2,children:(0,y.jsx)(d.Z,{required:!0,id:"minAge",name:"minAge",fullWidth:!0,size:"small",type:"number",autoComplete:"off",variant:"outlined",value:C,onChange:function(e){return E(e.target.value,S)}})}),(0,y.jsx)(l.ZP,{item:!0,xs:12,sm:2,children:(0,y.jsx)(c.Z,{sx:{display:"flex",justifyContent:"center",fontWeight:700},children:"Max. Age"})}),(0,y.jsx)(l.ZP,{item:!0,xs:12,sm:2,children:(0,y.jsx)(d.Z,{required:!0,id:"maxAge",name:"maxAge",type:"number",fullWidth:!0,size:"small",autoComplete:"off",variant:"outlined",value:w,onChange:function(e){return E(e.target.value,A)}})}),(0,y.jsx)(l.ZP,{item:!0,xs:12,sm:2,children:(0,y.jsx)(c.Z,{sx:{display:"flex",justifyContent:"center",fontWeight:700},children:"Date (last 7 days)"})}),(0,y.jsx)(l.ZP,{item:!0,xs:12,sm:2,children:(0,y.jsx)(d.Z,{id:"date",type:"date",value:z,onChange:function(e){return E(e.target.value,D)}})}),(0,y.jsx)(l.ZP,{item:!0,xs:12,sm:6}),(0,y.jsx)(l.ZP,{item:!0,xs:12,sm:5}),(0,y.jsx)(l.ZP,{item:!0,xs:12,sm:12,display:"flex",justifyContent:"center",alignItems:"center",children:(0,y.jsx)(h.Z,{variant:"contained",onClick:function(e){return function(e){e.preventDefault(),n&&j&&C>=13&&w<=130&&w>=C&&z?(F(!1),fetch("/api/survey/survey-filter-results",{method:"POST",credentials:"include",headers:{"content-type":"application/json"},body:JSON.stringify({country:n,state:j,ageFrom:C,ageTo:w,toDate:z})}).then((function(e){return e.json()})).then((function(e){console.log(e),J((0,r.Z)(e))}))):F(!0)}(e)},children:"Submit"})}),(0,y.jsx)(l.ZP,{item:!0,xs:12,sm:5}),(0,y.jsx)(l.ZP,{item:!0,xs:12,sm:12,display:"flex",justifyContent:"center",alignItems:"center",children:B&&(0,y.jsx)(u.Z,{color:"red",children:"Info not filled correctly"})})]})]})})})]})})})}}}]);